#!/bin/bash

# üöÄ S-MON - System Monitor with Glances
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Glances –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏

# –¶–≤–µ—Ç–∞ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
GRAY='\033[0;90m'
NC='\033[0m' # No Color

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
start_web_server() {
    echo -e "${CYAN}üöÄ –ó–∞–ø—É—Å–∫ Glances –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏...${NC}"
    echo -e "${WHITE}–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: ${GREEN}http://localhost:61208${NC}"
    echo -e "${WHITE}–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.${NC}"
    echo
    # –ó–∞–ø—É—Å–∫–∞–µ–º –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –±—Ä–∞—É–∑–µ—Ä–∞
    glances -w --open-web-browser
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
start_server() {
    echo -e "${CYAN}üñ•Ô∏è  –ó–∞–ø—É—Å–∫ Glances —Å–µ—Ä–≤–µ—Ä–∞...${NC}"
    echo -e "${WHITE}–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 61209${NC}"
    echo -e "${WHITE}–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: ${GREEN}glances -c localhost${NC}"
    echo -e "${WHITE}–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.${NC}"
    echo
    glances -s
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
watch_mode() {
    echo -e "${CYAN}üìä –ó–∞–ø—É—Å–∫ Glances —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏...${NC}"
    echo -e "${WHITE}–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:${NC}"
    echo -e "${GREEN}  ‚Ä¢ h${NC} - —Å–ø—Ä–∞–≤–∫–∞"
    echo -e "${GREEN}  ‚Ä¢ q${NC} - –≤—ã—Ö–æ–¥"
    echo -e "${GREEN}  ‚Ä¢ s${NC} - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"
    echo -e "${GREEN}  ‚Ä¢ c${NC} - CPU –¥–µ—Ç–∞–ª–∏"
    echo -e "${GREEN}  ‚Ä¢ m${NC} - –ø–∞–º—è—Ç—å –¥–µ—Ç–∞–ª–∏"
    echo -e "${GREEN}  ‚Ä¢ d${NC} - –¥–∏—Å–∫ –¥–µ—Ç–∞–ª–∏"
    echo -e "${GREEN}  ‚Ä¢ n${NC} - —Å–µ—Ç—å –¥–µ—Ç–∞–ª–∏"
    echo
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Å sparklines (–≥—Ä–∞—Ñ–∏–∫–∏) –∏ –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã
    glances --sparkline --disable-process
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
compact_mode() {
    echo -e "${CYAN}üìà –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞...${NC}"
    echo -e "${WHITE}–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏${NC}"
    echo
    # –õ–µ–≥–∫–∏–π —Ä–µ–∂–∏–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, –±–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    glances --light --sparkline --disable-process --disable-left-sidebar
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞
graph_export() {
    echo -e "${CYAN}üìä –≠–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤...${NC}"
    local export_path="$HOME/glances_graphs"
    mkdir -p "$export_path"
    echo -e "${WHITE}–ì—Ä–∞—Ñ–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤: ${GREEN}$export_path${NC}"
    echo -e "${WHITE}–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.${NC}"
    echo
    glances --export graph --export-graph-path "$export_path"
}

case "$1" in
    "watch"|"-w"|"--watch")
        trap 'echo -e "\n${GREEN}‚úì –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"; exit 0' INT
        watch_mode
        ;;
    "compact"|"-c"|"--compact")
        trap 'echo -e "\n${GREEN}‚úì –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"; exit 0' INT
        compact_mode
        ;;
    "web"|"-W"|"--web")
        trap 'echo -e "\n${GREEN}‚úì –í–µ–±-—Å–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"; exit 0' INT
        start_web_server
        ;;
    "server"|"-s"|"--server")
        trap 'echo -e "\n${GREEN}‚úì –°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"; exit 0' INT
        start_server
        ;;
    "export"|"-e"|"--export")
        trap 'echo -e "\n${GREEN}‚úì –≠–∫—Å–ø–æ—Ä—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"; exit 0' INT
        graph_export
        ;;
    "help"|"-h"|"--help")
        echo -e "${CYAN}üñ•Ô∏è  S-MON - System Monitor with Graphs${NC}"
        echo
        echo -e "${WHITE}–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:${NC}"
        echo -e "  ${GREEN}s-mon${NC}         - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏"
        echo -e "  ${GREEN}s-mon watch${NC}   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏"
        echo -e "  ${GREEN}s-mon compact${NC} - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏"
        echo -e "  ${GREEN}s-mon web${NC}     - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏"
        echo -e "  ${GREEN}s-mon server${NC}  - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
        echo -e "  ${GREEN}s-mon export${NC}  - –≠–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ —Ñ–∞–π–ª—ã"
        echo -e "  ${GREEN}s-mon help${NC}    - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É"
        echo
        echo -e "${YELLOW}üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:${NC}"
        echo -e "   ${WHITE}‚Ä¢ –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ sparklines${NC}"
        echo -e "   ${WHITE}‚Ä¢ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏${NC}"
        echo -e "   ${WHITE}‚Ä¢ –≠–∫—Å–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–µ—Ç PNG –≥—Ä–∞—Ñ–∏–∫–∏ –≤ –ø–∞–ø–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è${NC}"
        echo
        ;;
    *)
        trap 'echo -e "\n${GREEN}‚úì –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω${NC}"; exit 0' INT
        echo -e "${CYAN}üìä –ó–∞–ø—É—Å–∫ S-MON —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏...${NC}"
        echo -e "${WHITE}–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞${NC}"
        echo
        # –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –±–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
        glances --sparkline --disable-process
        ;;
esac
